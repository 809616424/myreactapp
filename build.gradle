plugins {
  id "com.moowork.node" version "1.2.0"
}
final def appName = "MYAPP"
apply plugin:'war'
apply plugin:'com.moowork.node'
project.webAppDirName = 'E:/MYAPP/build/'
node {
  version='12.4.0'
  download=false
}

task installCreateReactApp(type: NpmTask) {
    args = ['install', 'create-react-app', '--no-save']
}

task createApp(dependsOn: 'installCreateReactApp', type: NodeTask){
  description 'Create React app'
  script = file("node_modules/create-react-app/createReactApp")
  args = [appName]
}
task bundle(type: NpmTask, dependsOn: npmInstall) {
args = ['run','build']
}

task run(type: NpmTask) {
args = ['start']
}
war.dependsOn(bundle)
